#!/bin/sh

vol="$(pulsemixer --get-volume | awk '{print $1}')"

if [ "$vol" -eq "0" ]; then
	vol_info="^c#dfdfdf^ ^d^"
elif [ "$vol" -gt "70" ]; then
	vol_info="^c#dfdfdf^ ^d^"
else
	vol_info="^c#dfdfdf^ ^d^"
fi

[ "$(pulsemixer --get-mute)" = "1" ] && vol_info="^c#ff0000^ ^d^"

if amixer get Capture | tail -2 | grep -q '\[on\]'; then
	mic="^b#282828^^c#dfdfdf^  "
else
	mic="^b#282828^^c#ff0000^  "
fi

vol=$(printf %3s $vol | tr ' ' ' ')
printf "%s %s %s %s\\n" "$mic" "$vol_info" "$vol%"
